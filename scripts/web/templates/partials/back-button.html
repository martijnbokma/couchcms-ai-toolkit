<script>
    /**
     * Universal back button handler
     * Uses HTMX to navigate back with form data preservation
     */
    function goBack(backRoute, formData = {}) {
        // Get all form data from current form
        const form = document.querySelector('form')
        if (form) {
            const formDataObj = new FormData(form)
            for (const [key, value] of formDataObj.entries()) {
                formData[key] = value
            }
        }

        // Use HTMX to navigate back
        htmx.ajax('POST', backRoute, {
            target: '#wizard-content',
            swap: 'innerHTML',
            values: formData
        })
    }
</script>
