<nav class="relative mb-8 py-6" id="progress-indicator" hx-swap-oob="true">
    <!-- Progress Bar -->
    <div class="absolute top-8 left-0 right-0 flex items-center">
        <div class="flex h-0.5 w-full items-center overflow-hidden rounded-full bg-base-300">
            <div
                role="progressbar"
                aria-valuenow="{{ progressPercentage }}"
                aria-valuemin="0"
                aria-valuemax="100"
                class="flex items-center justify-center self-stretch rounded-full bg-primary transition-all duration-500 ease-out"
                style="width: {{ progressPercentage }}%"
            ></div>
        </div>
    </div>

    <!-- Steps -->
    <ol class="relative flex items-center justify-between" role="list">
        {% for step in steps %}
        <li class="flex flex-col {% if loop.first %}items-start{% elif loop.last %}items-end{% else %}items-center flex-1{% endif %}">
            <div class="group relative flex flex-col {% if loop.first %}items-start{% elif loop.last %}items-end{% else %}items-center{% endif %}">
                <!-- Bullet with number/icon -->
                <div
                    class="relative z-10 flex size-8 items-center justify-center rounded-full font-semibold text-sm transition-all duration-300 {% if step.isCompleted %}bg-primary text-primary-content shadow-lg shadow-primary/30{% elif step.isActive %}border-2 border-primary bg-base-100 text-primary shadow-lg shadow-primary/20{% else %}bg-base-300 text-base-content/50{% endif %}"
                >
                    {% if step.isCompleted %}
                    <svg
                        class="size-4"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        aria-hidden="true"
                    >
                        <path
                            fill-rule="evenodd"
                            d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                            clip-rule="evenodd"
                        />
                    </svg>
                    {% else %}
                    {{ step.num }}
                    {% endif %}
                </div>

                <!-- Label -->
                <div class="mt-3 {% if loop.first %}text-left{% elif loop.last %}text-right{% else %}text-center{% endif %}">
                    <div class="text-sm font-semibold transition-colors {% if step.isActive %}text-primary{% elif step.isCompleted %}text-base-content{% else %}text-base-content/60{% endif %}">
                        {{ step.label }}
                    </div>
                </div>
            </div>
        </li>
        {% endfor %}
    </ol>
</nav>
