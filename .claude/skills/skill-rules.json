{
  "couchcms-core": {
    "type": "domain",
    "enforcement": "suggest",
    "priority": "high",
    "description": "CouchCMS template engine patterns and best practices",
    "promptTriggers": {
      "keywords": [
        "couchcms",
        "couch",
        "cms:",
        "template",
        "snippet",
        "embed",
        "editable",
        "repeatable",
        "relation",
        "cloak",
        "k_page",
        "k_user",
        "prettyurl",
        "route"
      ],
      "intentPatterns": [
        "(create|add|modify|update).*?(template|page|snippet|component)",
        "(how to|best practice).*?(couchcms|couch|cms)",
        "(fix|debug|error).*?(cms:|template|couch)",
        "(list|show|display).*?(pages|content|data)",
        "(form|input|validation).*?(cms|couch)",
        "(user|auth|login|register).*?(couch|cms)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "*.php",
        "snippets/**/*.html",
        "views/**/*.html",
        "templates/**/*.html",
        "layouts/**/*.html",
        "filters/**/*.html",
        "components/**/*.html"
      ],
      "contentPatterns": [
        "<cms:",
        "cms:template",
        "cms:editable",
        "cms:embed",
        "cms:show",
        "cms:pages",
        "cms:if",
        "k_page_",
        "k_user_",
        "COUCH::invoke"
      ]
    },
    "preflightChecks": [
      {
        "pattern": "<!--.*<cms:",
        "severity": "critical",
        "message": "‚ö†Ô∏è CRITICAL: <cms: tags in HTML comments will EXECUTE! Use [cms: for disabled tags."
      },
      {
        "pattern": "<cms:else></cms:else>",
        "severity": "error",
        "message": "‚ùå <cms:else> is self-closing. Use <cms:else /> instead of paired tags."
      },
      {
        "pattern": "<cms:else_if[^/]*></cms:else_if>",
        "severity": "error",
        "message": "‚ùå <cms:else_if> is self-closing. Use <cms:else_if ... /> instead."
      }
    ]
  },
  "tailwindcss": {
    "type": "styling",
    "enforcement": "suggest",
    "priority": "medium",
    "description": "TailwindCSS 4 utility-first CSS patterns",
    "promptTriggers": {
      "keywords": [
        "tailwind",
        "css",
        "style",
        "class",
        "styling",
        "responsive",
        "dark mode",
        "theme",
        "color",
        "layout",
        "flex",
        "grid",
        "spacing"
      ],
      "intentPatterns": [
        "(style|design|layout).*?(component|element|page)",
        "(add|change|modify).*?(class|styling|color)",
        "(responsive|mobile|tablet|desktop).*?(design|layout)",
        "(dark|light).*?(mode|theme)",
        "(flex|grid).*?(layout|container)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "*.css",
        "tailwind.config.*",
        "postcss.config.*",
        "**/*.html",
        "**/*.php"
      ],
      "contentPatterns": [
        "@tailwind",
        "@apply",
        "@layer",
        "theme(",
        "class=\"",
        "className=\"",
        "bg-",
        "text-",
        "flex",
        "grid",
        "p-",
        "m-"
      ]
    },
    "preflightChecks": [
      {
        "pattern": "style=\"[^\"]*\"",
        "severity": "warning",
        "message": "‚ö†Ô∏è Inline styles detected. Consider using Tailwind utility classes instead."
      }
    ]
  },
  "daisyui": {
    "type": "styling",
    "enforcement": "suggest",
    "priority": "medium",
    "description": "daisyUI 5 component library for TailwindCSS",
    "promptTriggers": {
      "keywords": [
        "daisyui",
        "daisy",
        "component",
        "btn",
        "card",
        "modal",
        "drawer",
        "navbar",
        "hero",
        "alert",
        "badge",
        "tab",
        "dropdown",
        "toast"
      ],
      "intentPatterns": [
        "(add|create|use).*?(button|card|modal|drawer|navbar)",
        "(style|design).*?(component|ui)",
        "(alert|notification|toast).*?(message|feedback)",
        "(table|list|grid).*?(data|items)",
        "(form|input).*?(styling|component)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "**/*.html",
        "**/*.php",
        "components/**/*",
        "snippets/components/**/*"
      ],
      "contentPatterns": [
        "class=\".*btn",
        "class=\".*card",
        "class=\".*modal",
        "class=\".*drawer",
        "class=\".*navbar",
        "class=\".*alert",
        "class=\".*badge",
        "class=\".*tab",
        "data-theme",
        "base-100",
        "base-content",
        "primary",
        "secondary"
      ]
    },
    "preflightChecks": [
      {
        "pattern": "bg-(white|black|gray)",
        "severity": "warning",
        "message": "‚ö†Ô∏è Hardcoded colors detected. Use theme-aware colors (base-100, base-content, primary) for dark mode support."
      },
      {
        "pattern": "text-(white|black|gray-[0-9]+)",
        "severity": "warning",
        "message": "‚ö†Ô∏è Hardcoded text colors. Use base-content or primary-content for theme compatibility."
      },
      {
        "pattern": "border-(white|black|gray)",
        "severity": "info",
        "message": "‚ÑπÔ∏è Consider using base-300 or neutral for theme-aware borders."
      }
    ]
  },
  "alpinejs": {
    "type": "interactivity",
    "enforcement": "suggest",
    "priority": "medium",
    "description": "Alpine.js reactive components and CouchCMS integration",
    "promptTriggers": {
      "keywords": [
        "alpine",
        "x-data",
        "x-bind",
        "x-on",
        "x-show",
        "x-if",
        "x-for",
        "x-model",
        "x-effect",
        "x-init",
        "interactive",
        "reactive",
        "state",
        "toggle",
        "modal",
        "dropdown"
      ],
      "intentPatterns": [
        "(add|create|make).*?(interactive|dynamic|reactive)",
        "(toggle|show|hide).*?(element|component|modal)",
        "(state|data).*?(management|binding)",
        "(click|hover|focus).*?(event|handler)",
        "(form|input).*?(validation|binding)",
        "(fetch|load|ajax).*?(data|content)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "components/**/*.html",
        "snippets/**/*.html",
        "snippets/components/**/*.html",
        "**/*.html"
      ],
      "contentPatterns": [
        "x-data",
        "x-bind",
        "x-on",
        "@click",
        "@change",
        "@submit",
        "x-show",
        "x-if",
        "x-for",
        "x-model",
        "$store",
        "Alpine.store"
      ]
    },
    "preflightChecks": [
      {
        "pattern": "x-data=\"[^\"]*<cms:",
        "severity": "warning",
        "message": "‚ö†Ô∏è CouchCMS tags inside x-data may cause issues. Consider using x-init for async data."
      },
      {
        "pattern": "@click=\"[^\"]*location",
        "severity": "info",
        "message": "‚ÑπÔ∏è Consider using Alpine's $navigate or standard links for navigation."
      }
    ]
  },
  "databound-forms": {
    "type": "domain",
    "enforcement": "suggest",
    "priority": "high",
    "description": "CouchCMS DataBound Forms for CRUD operations",
    "promptTriggers": {
      "keywords": [
        "form",
        "databound",
        "db_persist",
        "validation",
        "crud",
        "create",
        "update",
        "delete",
        "bound_",
        "input",
        "submit",
        "k_success",
        "k_error"
      ],
      "intentPatterns": [
        "(create|add|build).*?(form|input|crud)",
        "(edit|update|modify).*?(record|data|entry)",
        "(delete|remove).*?(record|data|entry)",
        "(validate|check).*?(input|form|data)",
        "(save|persist|store).*?(data|form)",
        "(list|display|show).*?(records|entries)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "snippets/forms/**/*.html",
        "snippets/crud/**/*.html",
        "forms/**/*.html",
        "**/*form*.html",
        "**/*edit*.html",
        "**/*create*.html"
      ],
      "contentPatterns": [
        "<cms:db_persist",
        "<cms:db_persist_form",
        "<cms:db_delete",
        "<cms:input",
        "bound_",
        "k_success",
        "k_error",
        "k_bound_",
        "cms:form",
        "cms:if k_success"
      ]
    },
    "preflightChecks": [
      {
        "pattern": "<cms:db_persist[^>]*>(?!.*k_success)",
        "severity": "warning",
        "message": "‚ö†Ô∏è db_persist without k_success check. Always handle success/error states."
      },
      {
        "pattern": "<cms:input[^>]*type=['\"]text['\"][^>]*>(?!.*required)",
        "severity": "info",
        "message": "‚ÑπÔ∏è Text input without 'required'. Consider if validation is needed."
      },
      {
        "pattern": "<cms:form[^>]*>(?!.*<cms:if k_error)",
        "severity": "warning",
        "message": "‚ö†Ô∏è Form without error handling. Add <cms:if k_error> for user feedback."
      },
      {
        "pattern": "<cms:db_delete[^>]*>(?!.*masterpage)",
        "severity": "error",
        "message": "‚ùå db_delete requires masterpage parameter. Specify the template."
      }
    ]
  },
  "custom-routes": {
    "type": "domain",
    "enforcement": "suggest",
    "priority": "high",
    "description": "CouchCMS custom routes for clean URLs and REST-like patterns",
    "promptTriggers": {
      "keywords": [
        "route",
        "routing",
        "prettyurl",
        "clean url",
        "slug",
        "k_route",
        "cms:route",
        "routable",
        "K_IGNORE_CONTEXT"
      ],
      "intentPatterns": [
        "(create|add|define).*?(route|url|endpoint)",
        "(clean|pretty|custom).*?(url|path)",
        "(api|rest).*?(endpoint|route)",
        "(slug|dynamic).*?(url|path)",
        "(match|pattern).*?(url|route)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "*.php",
        "snippets/**/*.html",
        "api/**/*.php"
      ],
      "contentPatterns": [
        "cms:route",
        "routable='1'",
        "k_route_name",
        "k_route_param",
        "K_IGNORE_CONTEXT",
        "k_matched_route",
        "constraints="
      ]
    },
    "preflightChecks": [
      {
        "pattern": "routable=['\"]1['\"].*COUCH::invoke\\(\\s*\\)",
        "severity": "critical",
        "message": "‚ö†Ô∏è CRITICAL: Routable templates MUST use COUCH::invoke(K_IGNORE_CONTEXT). Routes will fail otherwise."
      },
      {
        "pattern": "cms:route[^>]*(?!constraints=)",
        "severity": "info",
        "message": "üí° Consider adding constraints to validate route parameters (e.g., constraints=\"id=\\d+\")."
      }
    ]
  },
  "folders": {
    "type": "domain",
    "enforcement": "suggest",
    "priority": "medium",
    "description": "CouchCMS folders for hierarchical content organization",
    "promptTriggers": {
      "keywords": [
        "folder",
        "category",
        "hierarchy",
        "nested",
        "parent",
        "child",
        "k_folder",
        "cms:folders",
        "cms:listfolders",
        "cms:dropdownfolders",
        "breadcrumb"
      ],
      "intentPatterns": [
        "(create|add|modify).*?(folder|category|hierarchy)",
        "(organize|structure).*?(content|pages)",
        "(list|show|display).*?(folders|categories)",
        "(breadcrumb|navigation).*?(folder)",
        "(filter|sort).*?(by folder|category)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "*.php",
        "snippets/**/*.html",
        "views/**/*.html"
      ],
      "contentPatterns": [
        "cms:folders",
        "cms:listfolders",
        "cms:dropdownfolders",
        "k_folder_",
        "k_is_folder",
        "folder=",
        "hierarchical="
      ]
    },
    "preflightChecks": [
      {
        "pattern": "folder=['\"]k_folder_name['\"]",
        "severity": "info",
        "message": "üí° Using dynamic folder filtering based on current folder context."
      },
      {
        "pattern": "cms:folders[^>]*hierarchical=['\"]0['\"]",
        "severity": "info",
        "message": "üí° Flat folder listing - set hierarchical='1' for nested structure."
      }
    ]
  },
  "archives": {
    "type": "domain",
    "enforcement": "suggest",
    "priority": "medium",
    "description": "CouchCMS date-based archives for blogs and news",
    "promptTriggers": {
      "keywords": [
        "archive",
        "date",
        "monthly",
        "yearly",
        "k_archive",
        "cms:archives",
        "k_is_archive",
        "calendar",
        "timeline"
      ],
      "intentPatterns": [
        "(create|add|show).*?(archive|timeline)",
        "(list|display).*?(by date|monthly|yearly)",
        "(blog|news).*?(archive)",
        "(filter|group).*?(date|month|year)",
        "(calendar|date).*?(view|navigation)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "*.php",
        "snippets/**/*.html",
        "views/**/*.html"
      ],
      "contentPatterns": [
        "cms:archives",
        "k_archive_",
        "k_is_archive",
        "k_is_year",
        "k_is_month",
        "k_is_day",
        "start_on=",
        "stop_before="
      ]
    },
    "preflightChecks": [
      {
        "pattern": "cms:archives[^>]*type=['\"]monthly['\"]",
        "severity": "info",
        "message": "üí° Monthly archives - common for blog sidebar widgets."
      },
      {
        "pattern": "k_archive_date",
        "severity": "info",
        "message": "üí° Using k_archive_date - format with cms:date for proper display."
      }
    ]
  },
  "relationships": {
    "type": "domain",
    "enforcement": "suggest",
    "priority": "medium",
    "description": "CouchCMS relationships between templates for linked content",
    "promptTriggers": {
      "keywords": [
        "relationship",
        "relation",
        "related",
        "reverse_related",
        "linked",
        "associate",
        "many-to-many",
        "one-to-many",
        "cms:related_pages",
        "cms:reverse_related"
      ],
      "intentPatterns": [
        "(create|add|define).*?(relationship|relation)",
        "(link|associate|connect).*?(pages|content|templates)",
        "(show|list|display).*?(related|linked)",
        "(many-to-many|one-to-many).*?(relationship)",
        "(artist|album|product|category).*?(relation)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "*.php",
        "snippets/**/*.html",
        "views/**/*.html"
      ],
      "contentPatterns": [
        "type='relation'",
        "cms:related_pages",
        "cms:reverse_related",
        "relation=",
        "masterpage="
      ]
    },
    "preflightChecks": [
      {
        "pattern": "cms:reverse_related[^>]*(?!masterpage=)",
        "severity": "error",
        "message": "‚ùå cms:reverse_related requires masterpage parameter to specify source template."
      },
      {
        "pattern": "type=['\"]relation['\"].*type=['\"]relation['\"]",
        "severity": "warning",
        "message": "‚ö†Ô∏è Define relationship in ONE template only to avoid conflicts."
      }
    ]
  },
  "repeatable-regions": {
    "type": "domain",
    "enforcement": "suggest",
    "priority": "medium",
    "description": "CouchCMS repeatable regions for dynamic content lists",
    "promptTriggers": {
      "keywords": [
        "repeatable",
        "cms:repeatable",
        "show_repeatable",
        "gallery",
        "slider",
        "faq",
        "features",
        "k_count",
        "k_total_records"
      ],
      "intentPatterns": [
        "(create|add).*?(repeatable|gallery|slider|faq)",
        "(list|display).*?(images|items|features)",
        "(dynamic|multiple).*?(content|fields)",
        "(slideshow|carousel).*?(images)",
        "(accordion|tabs).*?(content)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "*.php",
        "snippets/**/*.html",
        "views/**/*.html",
        "components/**/*.html"
      ],
      "contentPatterns": [
        "cms:repeatable",
        "cms:show_repeatable",
        "k_count",
        "k_total_records",
        "stacked_layout=",
        "col_width="
      ]
    },
    "preflightChecks": [
      {
        "pattern": "cms:show[^>]*name=['\"][^'\"]*_rep['\"]",
        "severity": "error",
        "message": "‚ùå Use cms:show_repeatable (not cms:show) to display repeatable region content."
      },
      {
        "pattern": "type=['\"]richtext['\"].*cms:repeatable",
        "severity": "warning",
        "message": "‚ö†Ô∏è Use type='nicedit' instead of 'richtext' inside repeatable regions."
      }
    ]
  },
  "search": {
    "type": "domain",
    "enforcement": "suggest",
    "priority": "medium",
    "description": "CouchCMS fulltext search functionality",
    "promptTriggers": {
      "keywords": [
        "search",
        "cms:search",
        "search_form",
        "k_search",
        "fulltext",
        "keyword",
        "query",
        "find"
      ],
      "intentPatterns": [
        "(create|add|implement).*?(search|find)",
        "(search|find).*?(pages|content|posts)",
        "(query|filter).*?(keyword|text)",
        "(results|display).*?(search)",
        "(highlight|excerpt).*?(search)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "*.php",
        "snippets/**/*.html",
        "views/**/*.html",
        "*search*.html"
      ],
      "contentPatterns": [
        "cms:search",
        "cms:search_form",
        "k_search_title",
        "k_search_excerpt",
        "k_search_keywords",
        "gpc 's'"
      ]
    },
    "preflightChecks": [
      {
        "pattern": "k_page_title(?!.*k_search_title)",
        "severity": "warning",
        "message": "‚ö†Ô∏è In search results, use k_search_title instead of k_page_title for highlighted matches."
      },
      {
        "pattern": "cms:search[^>]*(?!paginate=)",
        "severity": "info",
        "message": "üí° Consider adding paginate='1' for large search result sets."
      }
    ]
  },
  "pagination": {
    "type": "domain",
    "enforcement": "suggest",
    "priority": "medium",
    "description": "CouchCMS pagination for large result sets",
    "promptTriggers": {
      "keywords": [
        "pagination",
        "paginate",
        "paginator",
        "k_paginated",
        "page",
        "next",
        "previous",
        "limit",
        "offset"
      ],
      "intentPatterns": [
        "(add|implement).*?(pagination|paging)",
        "(split|divide).*?(results|pages)",
        "(next|previous).*?(page|link)",
        "(limit|show).*?(per page|results)",
        "(navigate|browse).*?(pages)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "*.php",
        "snippets/**/*.html",
        "views/**/*.html"
      ],
      "contentPatterns": [
        "paginate='1'",
        "cms:paginator",
        "k_paginated_top",
        "k_paginated_bottom",
        "k_paginator_required",
        "k_total_records",
        "k_record_from",
        "k_record_to"
      ]
    },
    "preflightChecks": [
      {
        "pattern": "cms:pages[^>]*(?!paginate=)",
        "severity": "info",
        "message": "üí° Consider adding paginate='1' for large result sets."
      },
      {
        "pattern": "cms:paginator[^>]*(?!k_paginator_required)",
        "severity": "warning",
        "message": "‚ö†Ô∏è Wrap cms:paginator with cms:if k_paginator_required to hide when not needed."
      }
    ]
  },
  "comments": {
    "type": "domain",
    "enforcement": "suggest",
    "priority": "medium",
    "description": "CouchCMS comment system for user interactions",
    "promptTriggers": {
      "keywords": [
        "comment",
        "cms:comments",
        "commentable",
        "k_comment",
        "process_comment",
        "moderation",
        "spam",
        "captcha"
      ],
      "intentPatterns": [
        "(create|add|enable).*?(comment|feedback)",
        "(show|display|list).*?(comments)",
        "(moderate|approve).*?(comment)",
        "(spam|captcha).*?(protection)",
        "(reply|respond).*?(comment)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "*.php",
        "snippets/**/*.html",
        "*comment*.html",
        "views/**/*.html"
      ],
      "contentPatterns": [
        "cms:comments",
        "commentable='1'",
        "process_comment",
        "k_comment_author",
        "k_comment_date",
        "k_is_commentable",
        "k_comments_count"
      ]
    },
    "preflightChecks": [
      {
        "pattern": "cms:comments(?!.*page_id=)",
        "severity": "warning",
        "message": "‚ö†Ô∏è Specify page_id=k_page_id to show comments for current page only."
      },
      {
        "pattern": "process_comment(?!.*captcha)",
        "severity": "warning",
        "message": "‚ö†Ô∏è Consider adding CAPTCHA for logged-out users to prevent spam."
      },
      {
        "pattern": "commentable=['\"]1['\"]",
        "severity": "info",
        "message": "üí° Template has comments enabled. Ensure comment form and display are implemented."
      }
    ]
  },
  "users": {
    "type": "domain",
    "enforcement": "suggest",
    "priority": "high",
    "description": "CouchCMS user authentication and access control",
    "promptTriggers": {
      "keywords": [
        "user",
        "auth",
        "login",
        "logout",
        "register",
        "k_user",
        "k_logged",
        "access_level",
        "member",
        "permission"
      ],
      "intentPatterns": [
        "(create|add|implement).*?(login|auth|user)",
        "(check|verify).*?(logged|authenticated|permission)",
        "(restrict|protect).*?(page|content|access)",
        "(register|signup).*?(user|member)",
        "(access|permission).*?(level|control)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "*.php",
        "snippets/**/*.html",
        "snippets/filters/**/*.html",
        "*login*.html",
        "*register*.html",
        "*profile*.html"
      ],
      "contentPatterns": [
        "k_logged_in",
        "k_logged_out",
        "k_user_access_level",
        "k_user_name",
        "k_user_id",
        "k_login_link",
        "k_logout_link",
        "access_level="
      ]
    },
    "preflightChecks": [
      {
        "pattern": "k_logged_in(?!.*k_user_access_level)",
        "severity": "warning",
        "message": "‚ö†Ô∏è Use k_user_access_level for authorization, not just k_logged_in for authentication."
      },
      {
        "pattern": "access_level=['\"]7['\"]",
        "severity": "info",
        "message": "üí° Access level 7 = Administrator. Use 2 for regular users, 4 for special users, 10 for super admin."
      }
    ]
  },
  "typescript": {
    "type": "language",
    "enforcement": "suggest",
    "priority": "medium",
    "description": "TypeScript development patterns and type safety",
    "promptTriggers": {
      "keywords": [
        "typescript",
        "ts",
        "type",
        "interface",
        "enum",
        "generic",
        "async",
        "await",
        "promise",
        "import",
        "export",
        "module"
      ],
      "intentPatterns": [
        "(create|add|define).*?(type|interface|function|class)",
        "(fix|resolve).*?(type|typescript).*?(error|issue)",
        "(convert|migrate).*?(javascript|js).*?(typescript|ts)",
        "(async|await).*?(function|handler)",
        "(import|export).*?(module|component)"
      ]
    },
    "fileTriggers": {
      "pathPatterns": [
        "*.ts",
        "*.tsx",
        "tsconfig.json",
        "assets/ts/**/*.ts",
        "src/**/*.ts"
      ],
      "contentPatterns": [
        "interface ",
        "type ",
        ": string",
        ": number",
        ": boolean",
        "export ",
        "import ",
        "async ",
        "await ",
        "Promise<"
      ]
    },
    "preflightChecks": [
      {
        "pattern": ": any",
        "severity": "warning",
        "message": "‚ö†Ô∏è 'any' type detected. Consider using a specific type or interface."
      },
      {
        "pattern": "// @ts-ignore",
        "severity": "warning",
        "message": "‚ö†Ô∏è @ts-ignore suppresses type errors. Fix the underlying type issue if possible."
      },
      {
        "pattern": "as any",
        "severity": "warning",
        "message": "‚ö†Ô∏è Type assertion to 'any' bypasses type checking. Use specific types."
      },
      {
        "pattern": "console\\.log",
        "severity": "info",
        "message": "‚ÑπÔ∏è console.log found. Remove for production or use proper logging."
      }
    ]
  }
}